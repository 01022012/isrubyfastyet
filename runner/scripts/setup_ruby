#!/usr/bin/env bash

# setup_ruby <rvm_ruby_name> <before_install_commands>

source "$HOME/.rvm/scripts/rvm"

rvm get stable
rvm reload

if rvm "$1" && (rvm current | grep '-head')
then
  # the ruby is installed and it's head
  echo "$2"
  eval "$2"
  rvm reinstall "$1"
fi

rvm "$1@benchmark" --create || (echo "$2"; eval "$2"; rvm install "$1" && rvm "$1@benchmark" --create)
